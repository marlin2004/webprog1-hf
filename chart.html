<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>Diagram</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header><h1>Web-programozás-1 Előadás Házi feladat</h1></header>
  <nav>
    <ul>
      <li><a href="index.html">Főoldal</a></li>
      <li><a href="tablazat.html">Táblázat</a></li>
      <li><a href="html5.html">HTML5 API</a></li>
      <li class="aktiv"><a href="chart.html">Diagram</a></li>
    </ul>
  </nav>
  <aside><p>ChartJS alapú diagram</p></aside>
  <div class="tartalom">
    <table id="adatTabla">
      <tr><th>Év</th><th>Adat1</th><th>Adat2</th><th>Adat3</th><th>Adat4</th><th>Adat5</th></tr>
      <tr><td>2020</td><td>5</td><td>10</td><td>15</td><td>20</td><td>25</td></tr>
      <tr><td>2021</td><td>8</td><td>12</td><td>18</td><td>22</td><td>28</td></tr>
      <tr><td>2022</td><td>6</td><td>11</td><td>17</td><td>21</td><td>26</td></tr>
      <tr><td>2023</td><td>7</td><td>13</td><td>19</td><td>23</td><td>29</td></tr>
      <tr><td>2024</td><td>9</td><td>14</td><td>20</td><td>24</td><td>30</td></tr>
    </table>

    <canvas id="diagram" width="400" height="200"></canvas>
  </div>
  <footer><p>Martinovic Lino (Y8M9S5), Rafai Roland (VLB1VG)</p></footer>

  <script>
    const sorok = document.querySelectorAll("#adatTabla tr");
    const ctx = document.getElementById('diagram').getContext('2d');
    let diagram = null;

    for (let i = 1; i < sorok.length; i++) {
      sorok[i].addEventListener("click", () => {
        const cellak = sorok[i].children;
        const cimke = cellak[0].textContent;
        const ertekek = Array.from(cellak).slice(1).map(td => parseInt(td.textContent));

        if (diagram) diagram.destroy();

        diagram = new Chart(ctx, {
          type: 'line',
          data: {
            labels: ['A', 'B', 'C', 'D', 'E'],
            datasets: [{
              label: cimke + ' adatai',
              data: ertekek,
              borderColor: 'blue',
              tension: 0.3
            }]
          }
        });
      });
    }
  </script>
</body>
</html>
